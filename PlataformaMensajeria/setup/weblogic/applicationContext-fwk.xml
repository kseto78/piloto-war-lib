<?xml version="1.0" encoding="ISO-8859-1"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:s="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-2.0.6.xsd">

	<bean id="propertyConfigurer"
		class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
		<property name="locations">
			<list>
				<value>classpath:/framework.properties</value>
			</list>
		</property>
	</bean>

<!-- Inicio de la configuración de las clases DAO y de servicio(Managers) con los usuarios en el LDAP de Oracle -->

    <bean id="ldapContext" class="com.map.j2ee.dao.ldap.LdapContextVO"  >
        <property name="name" value="authorization" />
        <property name="initialContextFactory" value="com.sun.jndi.ldap.LdapCtxFactory" />
        <property name="url" value="${ldap.url}" />
        <property name="defaultContext" value="true" />
        <property name="username" value="${ldap.username}" />
        <property name="password" value="${ldap.password}" />
        <property name="authenticationType" value="simple" />
    </bean>

    
    <bean id="groupParcialDAO" class="com.map.j2ee.security.perm.dao.ldap.LdapOracleGroupDAO" >       
        <property name="objectBaseDn" value="${ldap.applicationGroupDn}" />      
        <property name="actualCtxConfig" ref="ldapContext" />
    </bean>
    <bean id="groupDAO" parent="groupParcialDAO">
        <property name="userDao" ref="userDAO" />
    </bean>

    <bean id="listUserTypes" class="java.util.HashMap">
        <constructor-arg>
            <map>
                <entry key="1">
                    <bean class="com.map.j2ee.dao.ldap.LdapUserType">
                        <property name="name" value="All Net" />
                        <property name="objectBaseDn" value="${ldap.userAllNet.objectBaseDn}" />
                    </bean>
                </entry>
            </map>
        </constructor-arg>
    </bean>

    <bean id="userDAO" class="com.map.j2ee.security.perm.dao.ldap.LdapOracleUserDAO" >
        <property name="listUserTypes"  ref="listUserTypes" /> 
        <property name="actualCtxConfig" ref="ldapContext" />
        <property name="groupDAO" ref="groupParcialDAO" />
        <property name="groupUsersApp" value="${ldap.groupUsersDn}" />
    </bean>

    <bean id="fwkGroupManager" class="com.map.j2ee.security.perm.manager.impl.GroupManagerImpl">
        <property name="maintenanceDao" ref="groupDAO"/>
    </bean>

    <bean id="fwkUserManager" class="com.map.j2ee.security.perm.manager.impl.UserManagerImpl">
        <property name="passwordAlgoritm" value="SHA"/>
        <property name="maintenanceDao" ref="userDAO"/>
        <property name="baseGroupId" value="${ldap.groupUsersDn}" />
    </bean>

<!-- FIN de la configuración de las clases DAO y de servicio(Managers) con los usuarios en el LDAP de Oracle -->

</beans>
