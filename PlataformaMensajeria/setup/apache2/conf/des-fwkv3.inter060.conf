#
# Virtual Hosts
#
# If you want to maintain multiple domains/hostnames on your
# machine you can setup VirtualHost containers for them. Most configurations
# use only name-based virtual hosts so the server doesn't need to worry about
# IP addresses. This is indicated by the asterisks in the directives below.
#
# Please see the documentation at 
# <URL:http://httpd.apache.org/docs/2.2/vhosts/>
# for further details before you try to setup virtual hosts.
#
# You may use the command line option '-S' to verify your virtual host
# configuration.

#
# VirtualHost example:
# Almost any Apache directive may go into a VirtualHost container.
# The first VirtualHost section is used for all requests that do not
# match a ServerName or ServerAlias in any <VirtualHost> block.
#
LimitRequestBody 0

BrowserMatch ".*Firefox.*" \
nokeepalive ssl-unclean-shutdown \
downgrade-1.0 force-response-1.0

<VirtualHost *:80>
	 ServerAlias des-fwkv3t.inter060.es
	 #ServerName des-fwkv3t.inter060.es
	 DocumentRoot /usr/local/tomcat-6.0.29/webapps/PlataformaMensajeria 

        RewriteEngine on
	 RewriteRule ^/$ /PlataformaMensajeria [P,L]

	<Directory /usr/local/tomcat-6.0.29/webapps/PlataformaMensajeria/>
	    Order deny,allow
	    Allow from all
	</Directory>
  
	 JkMount /* tomcat	 
	
     	 CustomLog logs/access-fwkv3t.inter060.es.log combined
	 ErrorLog logs/error-fwkv3t.inter060.es.log 

</VirtualHost>

<VirtualHost *:80>
	 ServerAlias des-fwkv3j.inter060.es
	 #ServerName des-fwkv3j.inter060.es

  	 RewriteEngine on
	 RewriteRule ^/$ /PlataformaMensajeria [P,L]
	 
	 DocumentRoot /opt/jboss-5.1.0.GA/server/default/deploy/PlataformaMensajeria.war	 

	 JkMount /* cgpo
	 CustomLog logs/access-fwkv3j.inter060.es.log combined
	 ErrorLog logs/error-fwkv3j.inter060.es.log

</VirtualHost>

<VirtualHost *:80>
	ServerAlias des-fwkv3w.inter060.es
	#ServerName des-fwkv3w.inter060.es
	
	RewriteEngine on
	RewriteRule ^/$ /PlataformaMensajeria [P,L]
	
	<Location />

	<IfModule mod_weblogic.c>
		WebLogicCluster mapdes41g-i2.inter060.es:7002,mapdes41g-i2.inter060.es:7004
		SetHandler weblogic-handler
		Allow from all

		Debug ERR
	       DebugConfigInfo ON
	       WLCookieName JSESSIONID
	       WLLogFile logs\wlproxy.log

	</IfModule>

	</Location>       

	CustomLog logs/access-fwkv3w.inter060.es.log combined
	ErrorLog logs/error-fwkv3w.inter060.es.log

</VirtualHost>

<IfModule mod_ssl.c>
	
	<VirtualHost *:443>
		# Nombre desde el que se accede a este servicio
		ServerName des-fwkv3t.inter060.es:443
		SSLCertificateFile /home/altran2/apache2/ssl.cert/certificado-fwkv3.pem
		SSLCertificateKeyFile /home/altran2/apache2/ssl.key/key.pem	
		SSLCACertificateFile /home/altran2/apache2/sites-provider/ca.crt
		
		SSLEngine on	

		SSLOptions +ExportCertData	+StdEnvVars
		SSLCipherSuite      HIGH:MEDIUM
		SSLProxyEngine on

		RequireSSLHostMatch false	
		
		#DocumentRoot /usr/local/tomcat-6.0.29/webapps/PlataformaMensajeria

		RewriteEngine on
		RewriteRule ^/$ /PlataformaMensajeria [P,L]
		
		<Directory /usr/local/tomcat-6.0.29/webapps/PlataformaMensajeria/>
		    Order deny,allow
		    Allow from all
		</Directory>
		
		<Location /PlataformaMensajeria/homecert.action>
			SSLVerifyClient require
			SSLVerifyDepth 2	
			Allow from all
		</Location>
		
		<Location /PlataformaMensajeria>	
			Allow from all
		</Location>	
		
		JkMount /* tomcat
		JkExtractSSL On
		JkHTTPSIndicator HTTPS
		JkSESSIONIndicator SSL_SESSION_ID
		JkCIPHERIndicator SSL_CIPHER
		JkCERTSIndicator SSL_CLIENT_CERT
		JkEnvVar SSL_CLIENT_CERT SSL_CLIENT_CERT
		JkOptions +ForwardKeySize +ForwardURICompat -ForwardDirectories 
		JkLogLevel debug
		
		ErrorLog /home/altran2/apache2/logs/tomcat-error.log
		CustomLog /home/altran2/apache2/logs/tomcat-access.log combined
	</VirtualHost>

	<VirtualHost *:443>
		# Nombre desde el que se accede a este servicio
		ServerName des-fwkv3j.inter060.es:443
		SSLCertificateFile /home/altran2/apache2/ssl.cert/certificado-fwkv3.pem
		SSLCertificateKeyFile /home/altran2/apache2/ssl.key/key.pem	
		SSLCACertificateFile /home/altran2/apache2/sites-provider/ca.crt
		
		SSLEngine on	
		SSLProxyEngine on
		
		RewriteEngine on
		RewriteRule ^/$ /PlataformaMensajeria [P,L]		
		
		<Directory /opt/jboss-5.1.0.GA/server/default/deploy/PlataformaMensajeria.war/>
		    Order deny,allow
		    Allow from all
		</Directory>

		<Location /PlataformaMensajeria/homecert.action>
			SSLVerifyClient require
			SSLVerifyDepth 2	
			 					
			SSLOptions +ExportCertData +StdEnvVars
			Allow from all
		</Location>
		
		<Location /PlataformaMensajeria>	
			Allow from all
		</Location>	
		
		JkMount /* cgpo
		JkExtractSSL On
		JkHTTPSIndicator HTTPS
		JkSESSIONIndicator SSL_SESSION_ID
		JkCIPHERIndicator SSL_CIPHER
		JkCERTSIndicator SSL_CLIENT_CERT
		JkEnvVar SSL_CLIENT_CERT SSL_CLIENT_CERT
		JkOptions +ForwardKeySize +ForwardURICompat -ForwardDirectories 
		JkLogLevel debug
		
		ErrorLog /home/altran2/apache2/logs/jboss-error.log
		CustomLog /home/altran2/apache2/logs/jboss-access.log combined
	</VirtualHost>

	<VirtualHost *:443>
		ServerName des-fwkv3w.inter060.es:443
		SSLCertificateFile /home/altran2/apache2/ssl.cert/certificado-fwkv3.pem
		SSLCertificateKeyFile /home/altran2/apache2/ssl.key/key.pem	
		SSLCACertificateFile /home/altran2/apache2/sites-provider/ca.crt
		
		SSLEngine on	
		SSLProxyEngine on
		
		RewriteEngine on
		RewriteRule ^/$ /PlataformaMensajeria [P,L]	

		<Location /PlataformaMensajeria/homecert.action>
			SSLVerifyClient require
			SSLVerifyDepth 2	
			 					
			SSLOptions +ExportCertData +StdEnvVars
			Allow from all
			
		</Location>
		
		<Location /PlataformaMensajeria>	
			Allow from all
		</Location>			
		
		<IfModule mod_weblogic.c>
			WebLogicCluster mapdes41g-i2.inter060.es:7002,mapdes41g-i2.inter060.es:7004
			WLCookieName JSESSIONID
			DebugConfigInfo ON
			Debug All
			WLLogFile logs/weblogic-mod.log
			MatchExpression /*
			WLProxySSL ON
		</IfModule>
		
		ErrorLog /home/altran2/apache2/logs/weblogic-error.log
		CustomLog /home/altran2/apache2/logs/weblogic-access.log combined
	</VirtualHost>

</IfModule>





